<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PromptHunt — Discover & Share the Best AI Prompts</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50: '#f0f7ff',
              100: '#e0efff',
              200: '#b9ddff',
              300: '#7dc4ff',
              400: '#64A8F0',
              500: '#4a94e0',
              600: '#3a7bc8',
              700: '#7D9CC0',
              800: '#22263F',
              900: '#1a1d30',
            },
            ebony: {
              DEFAULT: '#22263F',
              light: '#2d324f',
              dark: '#1a1d30',
            }
          }
        }
      }
    }
  </script>
  <style>
    * { font-family: 'Inter', sans-serif; }
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;

    // LocalStorage keys
    const STORAGE_KEYS = {
      PROMPTS: 'prompthunt_prompts',
      VOTED: 'prompthunt_voted',
      COMMENTS: 'prompthunt_comments',
    };

    // Helper functions for localStorage
    const loadFromStorage = (key, defaultValue) => {
      try {
        const saved = localStorage.getItem(key);
        return saved ? JSON.parse(saved) : defaultValue;
      } catch (e) {
        console.error('Error loading from localStorage:', e);
        return defaultValue;
      }
    };

    const saveToStorage = (key, value) => {
      try {
        localStorage.setItem(key, JSON.stringify(value));
      } catch (e) {
        console.error('Error saving to localStorage:', e);
      }
    };

    const categoryColors = {
      'Role Type 1': 'bg-brand-100 text-brand-600',
      'Role Type 2': 'bg-emerald-100 text-emerald-700',
      'Role Type 3': 'bg-violet-100 text-violet-700',
      'Role Type 4': 'bg-rose-100 text-rose-700',
      'Role Type 5': 'bg-amber-100 text-amber-700',
      'Role Type 6': 'bg-cyan-100 text-cyan-700',
    };

    const categoryIconNames = {
      'Role Type 1': 'user',
      'Role Type 2': 'users',
      'Role Type 3': 'briefcase',
      'Role Type 4': 'building',
      'Role Type 5': 'target',
      'Role Type 6': 'star',
    };

    // Available tools
    const tools = ['M365 Copilot', 'AI Assistant', 'Other'];

    const toolColors = {
      'M365 Copilot': 'bg-sky-100 text-sky-700 border-sky-200',
      'AI Assistant': 'bg-violet-100 text-violet-700 border-violet-200',
      'Other': 'bg-gray-100 text-gray-600 border-gray-200',
    };

    const toolIconNames = {
      'M365 Copilot': 'file-spreadsheet',
      'AI Assistant': 'bot',
      'Other': 'wrench',
    };

    // Initial comments data
    const initialComments = {
      1: [
        { id: 101, author: 'Mike Chen', avatar: 'MC', text: 'This prompt completely changed how I use AI for research. Highly recommend!', timeAgo: '1 hour ago' },
        { id: 102, author: 'Sarah Lee', avatar: 'SL', text: 'Great for getting nuanced answers. I added "cite sources" to the end for even better results.', timeAgo: '3 hours ago' },
      ],
      2: [
        { id: 201, author: 'Dev Team', avatar: 'DT', text: 'We use this for all our PR reviews now. Saves so much time!', timeAgo: '2 hours ago' },
      ],
      4: [
        { id: 401, author: 'Analytics Pro', avatar: 'AP', text: 'Perfect for quarterly reports. The executive summary format is exactly what leadership wants.', timeAgo: '1 day ago' },
      ],
    };

    const initialPrompts = [
      {
        id: 1,
        title: "The Expert Advisor",
        tagline: "Transform Claude into a domain expert with deep, nuanced responses",
        prompt: "You are a world-class expert in [DOMAIN] with 20+ years of experience. When I ask questions, provide detailed answers that include: 1) The core concept explained simply, 2) Common misconceptions to avoid, 3) Practical examples, and 4) Advanced insights that only experts would know. Always cite your reasoning.",
        category: "Role Type 6",
        tool: "AI Assistant",
        author: "Sarah Chen",
        avatar: "SC",
        votes: 284,
        commentCount: 42,
        timeAgo: "2 hours ago",
        isNew: true,
      },
      {
        id: 2,
        title: "Code Review Partner",
        tagline: "Get thorough, constructive code reviews like a senior engineer",
        prompt: "Review my code as a senior engineer would. For each issue found: 1) Explain what's wrong, 2) Why it matters (performance, security, maintainability), 3) Suggest a fix with code example. Also highlight what's done well. Rate overall quality 1-10 and prioritize fixes by impact.",
        category: "Role Type 2",
        tool: "AI Assistant",
        author: "Marcus Johnson",
        avatar: "MJ",
        votes: 256,
        commentCount: 38,
        timeAgo: "5 hours ago",
        isNew: true,
      },
      {
        id: 3,
        title: "Creative Story Engine",
        tagline: "Generate compelling narratives with rich characters and plot twists",
        prompt: "Write a story in the style of [AUTHOR/GENRE]. Include: a protagonist with a hidden flaw, an unexpected ally, rising tension across 3 acts, sensory-rich descriptions, and a twist that recontextualizes earlier events. End with a line that haunts the reader.",
        category: "Role Type 4",
        tool: "AI Assistant",
        author: "Emily Rodriguez",
        avatar: "ER",
        votes: 198,
        commentCount: 29,
        timeAgo: "1 day ago",
        isNew: false,
      },
      {
        id: 4,
        title: "Data Insight Extractor",
        tagline: "Turn raw data into actionable business insights",
        prompt: "Analyze this data and provide: 1) 3 key findings with statistical significance, 2) Unexpected patterns or anomalies, 3) Actionable recommendations for stakeholders, 4) Limitations of the analysis, 5) Suggested follow-up questions to explore. Present findings for both technical and executive audiences.",
        category: "Role Type 3",
        tool: "M365 Copilot",
        author: "David Park",
        avatar: "DP",
        votes: 187,
        commentCount: 24,
        timeAgo: "1 day ago",
        isNew: false,
      },
      {
        id: 5,
        title: "Email Transformer",
        tagline: "Convert rough thoughts into polished professional emails",
        prompt: "Transform my rough notes into a professional email. Determine the appropriate tone (formal/casual) from context. Structure with: clear subject line, brief context, main ask/update highlighted, specific next steps with owners and dates. Keep under 150 words. Offer 3 subject line options.",
        category: "Role Type 5",
        tool: "M365 Copilot",
        author: "Lisa Thompson",
        avatar: "LT",
        votes: 176,
        commentCount: 31,
        timeAgo: "2 days ago",
        isNew: false,
      },
      {
        id: 6,
        title: "Socratic Teacher",
        tagline: "Learn through guided questioning instead of direct answers",
        prompt: "Help me understand [TOPIC] using the Socratic method. Don't give direct answers. Instead: 1) Ask probing questions that reveal my assumptions, 2) Guide me to discover insights myself, 3) When I'm stuck, give hints not solutions, 4) Celebrate my breakthroughs. Adapt difficulty to my responses.",
        category: "Role Type 6",
        tool: "AI Assistant",
        author: "James Wilson",
        avatar: "JW",
        votes: 165,
        commentCount: 27,
        timeAgo: "2 days ago",
        isNew: false,
      },
      {
        id: 7,
        title: "Debug Detective",
        tagline: "Systematic debugging that finds root causes, not just symptoms",
        prompt: "Help me debug this issue systematically. First, ask clarifying questions about: expected vs actual behavior, when it started, what changed recently. Then form hypotheses ranked by likelihood. For each, suggest a specific test. Guide me through elimination until we find the root cause, not just a workaround.",
        category: "Role Type 2",
        tool: "AI Assistant",
        author: "Nina Patel",
        avatar: "NP",
        votes: 154,
        commentCount: 22,
        timeAgo: "3 days ago",
        isNew: false,
      },
      {
        id: 8,
        title: "Brand Voice Crafter",
        tagline: "Develop a distinctive, consistent brand voice for any content",
        prompt: "Create content in this brand voice: [DESCRIBE BRAND]. First, identify 5 voice attributes (e.g., 'confident but not arrogant'). Then write the content applying these consistently. Include: 3 phrases to always use, 3 to avoid, and example sentences showing the voice in action.",
        category: "Role Type 1",
        tool: "M365 Copilot",
        author: "Alex Kim",
        avatar: "AK",
        votes: 143,
        commentCount: 19,
        timeAgo: "3 days ago",
        isNew: false,
      },
      {
        id: 9,
        title: "Meeting Summary Pro",
        tagline: "Transform chaotic meeting notes into clear action items",
        prompt: "Summarize this meeting transcript. Provide: 1) One-paragraph executive summary, 2) Key decisions made (with who decided), 3) Action items in table format (task, owner, deadline), 4) Open questions that need follow-up, 5) Topics deferred to future meetings. Flag any conflicting statements.",
        category: "Role Type 5",
        tool: "M365 Copilot",
        author: "Rachel Green",
        avatar: "RG",
        votes: 139,
        commentCount: 18,
        timeAgo: "4 days ago",
        isNew: false,
      },
      {
        id: 10,
        title: "API Documentation Writer",
        tagline: "Generate clear, comprehensive API docs from code",
        prompt: "Document this API endpoint. Include: 1) Clear description of purpose, 2) Request format with all parameters (required/optional, types, constraints), 3) Response format with example JSON, 4) Error codes and meanings, 5) Rate limits if applicable, 6) Code examples in Python and JavaScript. Follow OpenAPI conventions.",
        category: "Role Type 2",
        tool: "Other",
        author: "Tom Chen",
        avatar: "TC",
        votes: 132,
        commentCount: 21,
        timeAgo: "4 days ago",
        isNew: false,
      },
    ];

    // Convert kebab-case to PascalCase for Lucide icons
    const toPascalCase = (str) => {
      return str.split('-').map(word =>
        word.charAt(0).toUpperCase() + word.slice(1)
      ).join('');
    };

    // Icon component using Lucide
    function Icon({ name, className = "w-4 h-4" }) {
      const ref = React.useRef(null);

      useEffect(() => {
        if (ref.current) {
          ref.current.innerHTML = '';
          const pascalName = toPascalCase(name);
          const iconDef = lucide.icons[pascalName];
          if (iconDef) {
            const icon = lucide.createElement(iconDef);
            icon.classList.add(...className.split(' '));
            ref.current.appendChild(icon);
          }
        }
      }, [name, className]);

      return <span ref={ref} className="inline-flex items-center justify-center"></span>;
    }

    function PromptHunt() {
      // Initialize prompts from localStorage, merging with defaults
      const [prompts, setPrompts] = useState(() => {
        const saved = loadFromStorage(STORAGE_KEYS.PROMPTS, null);
        if (saved) {
          const savedIds = new Set(saved.map(p => p.id));
          const newDefaults = initialPrompts.filter(p => !savedIds.has(p.id));
          return [...saved, ...newDefaults];
        }
        return initialPrompts;
      });

      // Initialize comments from localStorage
      const [comments, setComments] = useState(() => {
        return loadFromStorage(STORAGE_KEYS.COMMENTS, initialComments);
      });

      const [sortBy, setSortBy] = useState('top');
      const [selectedCategory, setSelectedCategory] = useState('All');
      const [searchQuery, setSearchQuery] = useState('');
      const [showSubmitModal, setShowSubmitModal] = useState(false);
      const [expandedPrompt, setExpandedPrompt] = useState(null);
      const [copiedId, setCopiedId] = useState(null);
      const [commentModalPrompt, setCommentModalPrompt] = useState(null);
      const [newComment, setNewComment] = useState('');
      const [commentAuthor, setCommentAuthor] = useState('');

      // Initialize voted prompts from localStorage
      const [votedPrompts, setVotedPrompts] = useState(() => {
        const saved = loadFromStorage(STORAGE_KEYS.VOTED, []);
        return new Set(saved);
      });

      // Persist prompts to localStorage whenever they change
      useEffect(() => {
        saveToStorage(STORAGE_KEYS.PROMPTS, prompts);
      }, [prompts]);

      // Persist voted prompts to localStorage whenever they change
      useEffect(() => {
        saveToStorage(STORAGE_KEYS.VOTED, [...votedPrompts]);
      }, [votedPrompts]);

      // Persist comments to localStorage whenever they change
      useEffect(() => {
        saveToStorage(STORAGE_KEYS.COMMENTS, comments);
      }, [comments]);

      // Reset all data to defaults
      const handleReset = () => {
        if (confirm('Are you sure you want to reset all prompts to defaults? This will remove any prompts you\'ve added.')) {
          localStorage.removeItem(STORAGE_KEYS.PROMPTS);
          localStorage.removeItem(STORAGE_KEYS.VOTED);
          localStorage.removeItem(STORAGE_KEYS.COMMENTS);
          setPrompts(initialPrompts);
          setVotedPrompts(new Set());
          setComments(initialComments);
        }
      };

      // Count user-added prompts (those not in initialPrompts)
      const userAddedCount = useMemo(() => {
        const defaultIds = new Set(initialPrompts.map(p => p.id));
        return prompts.filter(p => !defaultIds.has(p.id)).length;
      }, [prompts]);

      // Delete a user-added prompt
      const handleDelete = (id) => {
        if (confirm('Are you sure you want to delete this prompt?')) {
          setPrompts(prompts.filter(p => p.id !== id));
          setVotedPrompts(prev => {
            const newSet = new Set(prev);
            newSet.delete(id);
            return newSet;
          });
        }
      };

      // Check if a prompt is user-added (can be deleted)
      const isUserPrompt = (id) => !initialPrompts.find(p => p.id === id);

      // Get comment count for a prompt
      const getCommentCount = (promptId) => {
        const promptComments = comments[promptId] || [];
        const prompt = prompts.find(p => p.id === promptId);
        return promptComments.length + (prompt?.commentCount || 0);
      };

      // Add a new comment
      const handleAddComment = (e) => {
        e.preventDefault();
        if (!newComment.trim() || !commentAuthor.trim() || !commentModalPrompt) return;

        const comment = {
          id: Date.now(),
          author: commentAuthor,
          avatar: commentAuthor.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2),
          text: newComment,
          timeAgo: 'Just now',
        };

        setComments(prev => ({
          ...prev,
          [commentModalPrompt.id]: [...(prev[commentModalPrompt.id] || []), comment],
        }));

        setNewComment('');
      };

      const [newPrompt, setNewPrompt] = useState({
        title: '',
        tagline: '',
        prompt: '',
        category: 'Role Type 1',
        tool: 'AI Assistant',
        author: 'You',
      });

      const categories = ['All', 'Role Type 1', 'Role Type 2', 'Role Type 3', 'Role Type 4', 'Role Type 5', 'Role Type 6'];

      const handleVote = (id) => {
        if (votedPrompts.has(id)) {
          setVotedPrompts(prev => {
            const newSet = new Set(prev);
            newSet.delete(id);
            return newSet;
          });
          setPrompts(prompts.map(p =>
            p.id === id ? { ...p, votes: p.votes - 1 } : p
          ));
        } else {
          setVotedPrompts(prev => new Set([...prev, id]));
          setPrompts(prompts.map(p =>
            p.id === id ? { ...p, votes: p.votes + 1 } : p
          ));
        }
      };

      const handleCopy = async (prompt, id) => {
        await navigator.clipboard.writeText(prompt);
        setCopiedId(id);
        setTimeout(() => setCopiedId(null), 2000);
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        const newEntry = {
          ...newPrompt,
          id: Date.now(),
          avatar: newPrompt.author.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2) || 'YO',
          votes: 1,
          commentCount: 0,
          timeAgo: 'Just now',
          isNew: true,
        };
        setPrompts([newEntry, ...prompts]);
        setVotedPrompts(prev => new Set([...prev, newEntry.id]));
        setShowSubmitModal(false);
        setNewPrompt({ title: '', tagline: '', prompt: '', category: 'Role Type 1', tool: 'AI Assistant', author: 'You' });
      };

      const filteredAndSortedPrompts = useMemo(() => {
        let filtered = prompts;

        if (selectedCategory !== 'All') {
          filtered = filtered.filter(p => p.category === selectedCategory);
        }

        if (searchQuery) {
          const query = searchQuery.toLowerCase();
          filtered = filtered.filter(p =>
            p.title.toLowerCase().includes(query) ||
            p.tagline.toLowerCase().includes(query) ||
            p.prompt.toLowerCase().includes(query) ||
            p.author.toLowerCase().includes(query) ||
            p.category.toLowerCase().includes(query) ||
            (p.tool && p.tool.toLowerCase().includes(query))
          );
        }

        return [...filtered].sort((a, b) => {
          if (sortBy === 'top') return b.votes - a.votes;
          if (sortBy === 'new') return b.id - a.id;
          return (b.votes / Math.max(1, b.id)) - (a.votes / Math.max(1, a.id));
        });
      }, [prompts, selectedCategory, searchQuery, sortBy]);

      const stats = useMemo(() => ({
        totalPrompts: prompts.length,
        totalVotes: prompts.reduce((sum, p) => sum + p.votes, 0),
        categories: new Set(prompts.map(p => p.category)).size,
      }), [prompts]);

      return (
        <div className="min-h-screen bg-gradient-to-br from-gray-50 via-white to-brand-50">
          {/* Header */}
          <header className="bg-white/80 backdrop-blur-md border-b border-gray-200 sticky top-0 z-40">
            <div className="max-w-6xl mx-auto px-4 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 bg-gradient-to-br from-brand-400 to-brand-700 rounded-xl flex items-center justify-center shadow-lg shadow-brand-400/20">
                    <Icon name="sparkles" className="w-6 h-6 text-white" />
                  </div>
                  <div>
                    <h1 className="text-xl font-bold text-ebony">PromptHunt</h1>
                    <p className="text-xs text-gray-500 hidden sm:block">Discover & share the best AI prompts</p>
                  </div>
                </div>

                <div className="flex items-center gap-3">
                  <div className="relative hidden sm:block">
                    <Icon name="search" className="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" />
                    <input
                      type="text"
                      placeholder="Search prompts..."
                      value={searchQuery}
                      onChange={(e) => setSearchQuery(e.target.value)}
                      className="pl-9 pr-4 py-2 w-64 bg-gray-100 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-400 focus:bg-white transition-all"
                    />
                  </div>
                  <button
                    onClick={() => setShowSubmitModal(true)}
                    className="flex items-center gap-2 bg-gradient-to-r from-brand-400 to-brand-600 text-white px-4 py-2 rounded-lg font-medium hover:shadow-lg hover:shadow-brand-400/25 transition-all active:scale-95"
                  >
                    <Icon name="plus" className="w-4 h-4" />
                    <span className="hidden sm:inline">Submit Prompt</span>
                    <span className="sm:hidden">Submit</span>
                  </button>
                </div>
              </div>

              {/* Mobile Search */}
              <div className="mt-3 sm:hidden">
                <div className="relative">
                  <Icon name="search" className="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" />
                  <input
                    type="text"
                    placeholder="Search prompts..."
                    value={searchQuery}
                    onChange={(e) => setSearchQuery(e.target.value)}
                    className="w-full pl-9 pr-4 py-2 bg-gray-100 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-400 focus:bg-white transition-all"
                  />
                </div>
              </div>
            </div>
          </header>

          {/* Hero Stats */}
          <div className="bg-gradient-to-r from-ebony to-ebony-light text-white py-8">
            <div className="max-w-6xl mx-auto px-4">
              <div className="text-center mb-6">
                <h2 className="text-2xl sm:text-3xl font-bold mb-2">The best AI prompts, curated by the community</h2>
                <p className="text-brand-300">Discover prompts that supercharge your AI workflows</p>
              </div>
              <div className="flex justify-center gap-8 sm:gap-16">
                <div className="text-center">
                  <div className="text-3xl font-bold text-brand-400">{stats.totalPrompts}</div>
                  <div className="text-gray-400 text-sm">Prompts</div>
                </div>
                <div className="text-center">
                  <div className="text-3xl font-bold text-brand-400">{stats.totalVotes.toLocaleString()}</div>
                  <div className="text-gray-400 text-sm">Upvotes</div>
                </div>
                <div className="text-center">
                  <div className="text-3xl font-bold text-brand-400">{stats.categories}</div>
                  <div className="text-gray-400 text-sm">Role Types</div>
                </div>
              </div>
            </div>
          </div>

          <main className="max-w-6xl mx-auto px-4 py-6">
            {/* Filters */}
            <div className="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
              <div className="flex items-center gap-2 overflow-x-auto pb-2 sm:pb-0 scrollbar-hide">
                {categories.map(cat => (
                  <button
                    key={cat}
                    onClick={() => setSelectedCategory(cat)}
                    className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all whitespace-nowrap ${
                      selectedCategory === cat
                        ? 'bg-ebony text-white shadow-lg'
                        : 'bg-white text-gray-600 hover:bg-gray-100 border border-gray-200'
                    }`}
                  >
                    {cat}
                  </button>
                ))}
              </div>

              <div className="flex items-center gap-1 bg-white rounded-lg p-1 border border-gray-200 self-start sm:self-auto">
                {[
                  { id: 'top', icon: 'trophy', label: 'Top' },
                  { id: 'new', icon: 'clock', label: 'New' },
                  { id: 'trending', icon: 'trending-up', label: 'Trending' },
                ].map(({ id, icon, label }) => (
                  <button
                    key={id}
                    onClick={() => setSortBy(id)}
                    className={`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all ${
                      sortBy === id
                        ? 'bg-gray-100 text-ebony'
                        : 'text-gray-500 hover:text-gray-700'
                    }`}
                  >
                    <Icon name={icon} className="w-4 h-4" />
                    {label}
                  </button>
                ))}
              </div>
            </div>

            {/* Prompts List */}
            <div className="space-y-3">
              {filteredAndSortedPrompts.map((prompt, index) => (
                <div
                  key={prompt.id}
                  className="bg-white rounded-xl p-4 sm:p-5 hover:shadow-xl transition-all border border-gray-100 group"
                >
                  <div className="flex gap-3 sm:gap-4">
                    {/* Vote Button */}
                    <button
                      onClick={() => handleVote(prompt.id)}
                      className={`flex flex-col items-center justify-center w-12 sm:w-14 h-14 sm:h-16 rounded-lg border-2 transition-all flex-shrink-0 ${
                        votedPrompts.has(prompt.id)
                          ? 'border-brand-400 bg-brand-50 text-brand-600'
                          : 'border-gray-200 hover:border-brand-300 text-gray-400 hover:text-brand-500'
                      }`}
                    >
                      <Icon name="chevron-up" className="w-5 h-5" />
                      <span className="font-bold text-sm">{prompt.votes}</span>
                    </button>

                    {/* Content */}
                    <div className="flex-1 min-w-0">
                      <div className="flex flex-col sm:flex-row sm:items-start justify-between gap-2 sm:gap-3">
                        <div className="flex-1">
                          <div className="flex flex-wrap items-center gap-2 mb-1">
                            <h3 className="font-semibold text-ebony text-base sm:text-lg">{prompt.title}</h3>
                            {prompt.isNew && (
                              <span className="px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full">
                                NEW
                              </span>
                            )}
                            {!initialPrompts.find(p => p.id === prompt.id) && (
                              <span className="px-2 py-0.5 bg-violet-100 text-violet-700 text-xs font-medium rounded-full">
                                YOURS
                              </span>
                            )}
                          </div>
                          <p className="text-gray-600 text-sm mb-2">{prompt.tagline}</p>
                        </div>
                        <div className="flex flex-wrap items-center gap-2 self-start">
                          <div className={`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${categoryColors[prompt.category]}`}>
                            <Icon name={categoryIconNames[prompt.category]} className="w-3 h-3" />
                            {prompt.category}
                          </div>
                          {prompt.tool && (
                            <div className={`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium border ${toolColors[prompt.tool] || toolColors['Other']}`}>
                              <Icon name={toolIconNames[prompt.tool] || 'wrench'} className="w-3 h-3" />
                              {prompt.tool}
                            </div>
                          )}
                        </div>
                      </div>

                      {/* Expandable Prompt */}
                      <div
                        className={`mt-2 p-3 bg-gray-50 rounded-lg cursor-pointer transition-all ${
                          expandedPrompt === prompt.id ? '' : 'hover:bg-gray-100'
                        }`}
                        onClick={() => setExpandedPrompt(expandedPrompt === prompt.id ? null : prompt.id)}
                      >
                        <p className={`text-sm text-gray-700 font-mono leading-relaxed ${
                          expandedPrompt === prompt.id ? '' : 'line-clamp-2'
                        }`}>
                          {prompt.prompt}
                        </p>
                        {expandedPrompt !== prompt.id && (
                          <span className="text-xs text-brand-500 mt-1 inline-block font-medium">Click to expand...</span>
                        )}
                      </div>

                      {/* Footer */}
                      <div className="flex flex-col sm:flex-row sm:items-center justify-between mt-3 gap-3">
                        <div className="flex items-center gap-3 text-sm text-gray-500 flex-wrap">
                          <div className="flex items-center gap-1.5">
                            <div className="w-6 h-6 rounded-full bg-gradient-to-br from-brand-400 to-brand-700 flex items-center justify-center text-white text-xs font-medium">
                              {prompt.avatar}
                            </div>
                            <span>{prompt.author}</span>
                          </div>
                          <span className="hidden sm:inline">•</span>
                          <span>{prompt.timeAgo}</span>
                          <span className="hidden sm:inline">•</span>
                          <button
                            onClick={(e) => {
                              e.stopPropagation();
                              setCommentModalPrompt(prompt);
                            }}
                            className="flex items-center gap-1 hover:text-brand-500 transition-colors cursor-pointer"
                          >
                            <Icon name="message-square" className="w-4 h-4" />
                            <span>{getCommentCount(prompt.id)} comments</span>
                          </button>
                        </div>

                        <div className="flex items-center gap-2">
                          {isUserPrompt(prompt.id) && (
                            <button
                              onClick={(e) => {
                                e.stopPropagation();
                                handleDelete(prompt.id);
                              }}
                              className="flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-all bg-gray-100 text-gray-400 hover:bg-red-100 hover:text-red-600"
                              title="Delete this prompt"
                            >
                              <Icon name="trash-2" className="w-4 h-4" />
                            </button>
                          )}
                          <button
                            onClick={(e) => {
                              e.stopPropagation();
                              handleCopy(prompt.prompt, prompt.id);
                            }}
                            className={`flex items-center justify-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium transition-all ${
                              copiedId === prompt.id
                                ? 'bg-emerald-100 text-emerald-700'
                                : 'bg-gray-100 text-gray-600 hover:bg-brand-100 hover:text-brand-700'
                            }`}
                          >
                            {copiedId === prompt.id ? (
                              <>
                                <Icon name="check" className="w-4 h-4" />
                                Copied!
                              </>
                            ) : (
                              <>
                                <Icon name="copy" className="w-4 h-4" />
                                Copy Prompt
                              </>
                            )}
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>

            {filteredAndSortedPrompts.length === 0 && (
              <div className="text-center py-16 bg-white rounded-xl border border-gray-100">
                <Icon name="sparkles" className="w-16 h-16 text-gray-200 mx-auto mb-4" />
                <h3 className="text-lg font-semibold text-gray-700">No prompts found</h3>
                <p className="text-gray-400 mt-1 mb-4">Try adjusting your search or filters</p>
                <button
                  onClick={() => { setSearchQuery(''); setSelectedCategory('All'); }}
                  className="text-brand-500 font-medium hover:text-brand-600"
                >
                  Clear filters
                </button>
              </div>
            )}
          </main>

          {/* Comments Modal */}
          {commentModalPrompt && (
            <div className="fixed inset-0 bg-ebony/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
              <div className="bg-white rounded-2xl max-w-lg w-full max-h-[80vh] overflow-hidden shadow-2xl flex flex-col">
                <div className="p-6 border-b border-gray-100">
                  <div className="flex items-center justify-between">
                    <div>
                      <h2 className="text-xl font-bold text-ebony">Comments</h2>
                      <p className="text-sm text-gray-500 mt-1">{commentModalPrompt.title}</p>
                    </div>
                    <button
                      onClick={() => setCommentModalPrompt(null)}
                      className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                    >
                      <Icon name="x" className="w-5 h-5 text-gray-400" />
                    </button>
                  </div>
                </div>

                {/* Comments List */}
                <div className="flex-1 overflow-y-auto p-6 space-y-4">
                  {(comments[commentModalPrompt.id] || []).length === 0 ? (
                    <div className="text-center py-8 text-gray-400">
                      <Icon name="message-square" className="w-12 h-12 mx-auto mb-3 opacity-50" />
                      <p>No comments yet. Be the first to comment!</p>
                    </div>
                  ) : (
                    (comments[commentModalPrompt.id] || []).map(comment => (
                      <div key={comment.id} className="flex gap-3">
                        <div className="w-8 h-8 rounded-full bg-gradient-to-br from-brand-400 to-brand-700 flex items-center justify-center text-white text-xs font-medium flex-shrink-0">
                          {comment.avatar}
                        </div>
                        <div className="flex-1">
                          <div className="flex items-center gap-2 mb-1">
                            <span className="font-medium text-ebony text-sm">{comment.author}</span>
                            <span className="text-xs text-gray-400">{comment.timeAgo}</span>
                          </div>
                          <p className="text-gray-600 text-sm">{comment.text}</p>
                        </div>
                      </div>
                    ))
                  )}
                </div>

                {/* Add Comment Form */}
                <div className="p-6 border-t border-gray-100 bg-gray-50">
                  <form onSubmit={handleAddComment} className="space-y-3">
                    <input
                      type="text"
                      placeholder="Your name"
                      value={commentAuthor}
                      onChange={(e) => setCommentAuthor(e.target.value)}
                      className="w-full px-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent"
                      required
                    />
                    <div className="flex gap-2">
                      <input
                        type="text"
                        placeholder="Write a comment..."
                        value={newComment}
                        onChange={(e) => setNewComment(e.target.value)}
                        className="flex-1 px-4 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent"
                        required
                      />
                      <button
                        type="submit"
                        className="px-4 py-2 bg-gradient-to-r from-brand-400 to-brand-600 text-white rounded-lg font-medium hover:shadow-lg hover:shadow-brand-400/25 transition-all"
                      >
                        <Icon name="send" className="w-4 h-4" />
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          )}

          {/* Submit Modal */}
          {showSubmitModal && (
            <div className="fixed inset-0 bg-ebony/50 backdrop-blur-sm flex items-center justify-center z-50 p-4">
              <div className="bg-white rounded-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto shadow-2xl">
                <div className="p-6">
                  <div className="flex items-center justify-between mb-6">
                    <div>
                      <h2 className="text-xl font-bold text-ebony">Submit a Prompt</h2>
                      <p className="text-sm text-gray-500 mt-1">Share your best AI prompt with the community</p>
                    </div>
                    <button
                      onClick={() => setShowSubmitModal(false)}
                      className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                    >
                      <Icon name="x" className="w-5 h-5 text-gray-400" />
                    </button>
                  </div>

                  <form onSubmit={handleSubmit} className="space-y-4">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Your Name
                      </label>
                      <input
                        type="text"
                        required
                        value={newPrompt.author}
                        onChange={(e) => setNewPrompt({ ...newPrompt, author: e.target.value })}
                        placeholder="e.g., Jane Smith"
                        className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Title
                      </label>
                      <input
                        type="text"
                        required
                        value={newPrompt.title}
                        onChange={(e) => setNewPrompt({ ...newPrompt, title: e.target.value })}
                        placeholder="e.g., The Expert Advisor"
                        className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent"
                      />
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Tagline
                      </label>
                      <input
                        type="text"
                        required
                        value={newPrompt.tagline}
                        onChange={(e) => setNewPrompt({ ...newPrompt, tagline: e.target.value })}
                        placeholder="A short description of what your prompt does"
                        className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent"
                      />
                    </div>

                    <div className="grid grid-cols-2 gap-3">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Role Type
                        </label>
                        <select
                          value={newPrompt.category}
                          onChange={(e) => setNewPrompt({ ...newPrompt, category: e.target.value })}
                          className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent bg-white"
                        >
                          {categories.filter(c => c !== 'All').map(cat => (
                            <option key={cat} value={cat}>{cat}</option>
                          ))}
                        </select>
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-1">
                          Tool
                        </label>
                        <select
                          value={newPrompt.tool}
                          onChange={(e) => setNewPrompt({ ...newPrompt, tool: e.target.value })}
                          className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent bg-white"
                        >
                          {tools.map(tool => (
                            <option key={tool} value={tool}>{tool}</option>
                          ))}
                        </select>
                      </div>
                    </div>

                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-1">
                        Your Prompt
                      </label>
                      <textarea
                        required
                        rows={6}
                        value={newPrompt.prompt}
                        onChange={(e) => setNewPrompt({ ...newPrompt, prompt: e.target.value })}
                        placeholder="Enter your full prompt here. Use [PLACEHOLDERS] for variable parts that users should customize..."
                        className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-400 focus:border-transparent font-mono text-sm"
                      />
                      <p className="text-xs text-gray-400 mt-1">Tip: Use [BRACKETS] for parts users should customize</p>
                    </div>

                    <div className="flex gap-3 pt-2">
                      <button
                        type="button"
                        onClick={() => setShowSubmitModal(false)}
                        className="flex-1 px-4 py-2.5 border border-gray-200 text-gray-600 rounded-lg font-medium hover:bg-gray-50 transition-colors"
                      >
                        Cancel
                      </button>
                      <button
                        type="submit"
                        className="flex-1 px-4 py-2.5 bg-gradient-to-r from-brand-400 to-brand-600 text-white rounded-lg font-medium hover:shadow-lg hover:shadow-brand-400/25 transition-all active:scale-98"
                      >
                        Submit Prompt
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          )}

          {/* Footer */}
          <footer className="border-t border-gray-200 mt-12 py-8 bg-white">
            <div className="max-w-6xl mx-auto px-4">
              <div className="flex flex-col sm:flex-row items-center justify-between gap-4">
                <div className="flex items-center gap-2">
                  <div className="w-8 h-8 bg-gradient-to-br from-brand-400 to-brand-700 rounded-lg flex items-center justify-center">
                    <Icon name="sparkles" className="w-4 h-4 text-white" />
                  </div>
                  <span className="font-semibold text-ebony">PromptHunt</span>
                </div>
                <div className="flex items-center gap-3 text-sm text-gray-500">
                  <div className="flex items-center gap-1.5 px-3 py-1.5 bg-emerald-50 text-emerald-700 rounded-full">
                    <Icon name="hard-drive" className="w-3 h-3" />
                    <span>Saved locally</span>
                    {userAddedCount > 0 && (
                      <span className="bg-emerald-200 text-emerald-800 px-1.5 py-0.5 rounded text-xs font-medium">
                        +{userAddedCount} yours
                      </span>
                    )}
                  </div>
                </div>
                <div className="flex items-center gap-4">
                  <button
                    onClick={handleReset}
                    className="text-sm text-gray-400 hover:text-red-500 transition-colors flex items-center gap-1"
                  >
                    <Icon name="rotate-ccw" className="w-3 h-3" />
                    Reset to defaults
                  </button>
                </div>
              </div>
            </div>
          </footer>
        </div>
      );
    }

    ReactDOM.render(<PromptHunt />, document.getElementById('root'));
  </script>
</body>
</html>
